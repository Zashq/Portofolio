{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nconst API_BASE_URL = 'https://fakestoreapi.com';\nclass ProductService {\n  constructor() {\n    this.client = axios.create({\n      baseURL: API_BASE_URL,\n      timeout: 10000,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    // Add request interceptor for logging\n    this.client.interceptors.request.use(config => {\n      console.log(`API Request: ${config.method?.toUpperCase()} ${config.url}`);\n      return config;\n    }, error => {\n      console.error('API Request Error:', error);\n      return Promise.reject(error);\n    });\n\n    // Add response interceptor for error handling\n    this.client.interceptors.response.use(response => response.data, error => {\n      console.error('API Response Error:', error);\n      if (error.response) {\n        throw new Error(`API Error: ${error.response.status} - ${error.response.statusText}`);\n      } else if (error.request) {\n        throw new Error('Network error: No response from server');\n      } else {\n        throw new Error('Request error: ' + error.message);\n      }\n    });\n  }\n\n  // Get all products\n  async getAllProducts(limit = null, sort = 'asc') {\n    const params = {};\n    if (limit) params.limit = limit;\n    if (sort) params.sort = sort;\n    return this.client.get('/products', {\n      params\n    });\n  }\n\n  // Get single product\n  async getProductById(id) {\n    return this.client.get(`/products/${id}`);\n  }\n\n  // Get all categories\n  async getCategories() {\n    return this.client.get('/products/categories');\n  }\n\n  // Get products by category\n  async getProductsByCategory(category, limit = null, sort = 'asc') {\n    const params = {};\n    if (limit) params.limit = limit;\n    if (sort) params.sort = sort;\n    return this.client.get(`/products/category/${category}`, {\n      params\n    });\n  }\n\n  // Add new product (fake - not actually saved)\n  async addProduct(product) {\n    return this.client.post('/products', product);\n  }\n\n  // Update product (fake - not actually saved)\n  async updateProduct(id, product) {\n    return this.client.put(`/products/${id}`, product);\n  }\n\n  // Delete product (fake - not actually deleted)\n  async deleteProduct(id) {\n    return this.client.delete(`/products/${id}`);\n  }\n\n  // Get all users (for admin purposes)\n  async getAllUsers() {\n    return this.client.get('/users');\n  }\n\n  // Get single user\n  async getUserById(id) {\n    return this.client.get(`/users/${id}`);\n  }\n\n  // Get all carts\n  async getAllCarts() {\n    return this.client.get('/carts');\n  }\n\n  // Get single cart\n  async getCartById(id) {\n    return this.client.get(`/carts/${id}`);\n  }\n\n  // Get user carts\n  async getUserCarts(userId) {\n    return this.client.get(`/carts/user/${userId}`);\n  }\n\n  // Add new cart\n  async addCart(cart) {\n    return this.client.post('/carts', cart);\n  }\n\n  // Update cart\n  async updateCart(id, cart) {\n    return this.client.put(`/carts/${id}`, cart);\n  }\n\n  // Delete cart\n  async deleteCart(id) {\n    return this.client.delete(`/carts/${id}`);\n  }\n\n  // Custom method for batch fetching with caching\n  async fetchProductsWithCache(cacheKey = 'products_cache', maxAge = 300000) {\n    // 5 minutes\n    try {\n      const cached = localStorage.getItem(cacheKey);\n      if (cached) {\n        const {\n          data,\n          timestamp\n        } = JSON.parse(cached);\n        if (Date.now() - timestamp < maxAge) {\n          console.log('Using cached products');\n          return data;\n        }\n      }\n      const data = await this.getAllProducts();\n      localStorage.setItem(cacheKey, JSON.stringify({\n        data,\n        timestamp: Date.now()\n      }));\n      return data;\n    } catch (error) {\n      // If API fails, try to use cached data even if expired\n      const cached = localStorage.getItem(cacheKey);\n      if (cached) {\n        const {\n          data\n        } = JSON.parse(cached);\n        console.warn('Using expired cache due to API error');\n        return data;\n      }\n      throw error;\n    }\n  }\n\n  // Mock real-time updates (simulate WebSocket behavior)\n  subscribeToProductUpdates(callback, interval = 60000) {\n    // 1 minute\n    const fetchUpdates = async () => {\n      try {\n        const products = await this.getAllProducts();\n\n        // Simulate random price changes\n        const updatedProducts = products.map(product => ({\n          ...product,\n          price: product.price * (0.95 + Math.random() * 0.1),\n          // ±5% price variation\n          lastUpdated: new Date().toISOString()\n        }));\n        callback(updatedProducts);\n      } catch (error) {\n        console.error('Error fetching product updates:', error);\n      }\n    };\n\n    // Initial fetch\n    fetchUpdates();\n\n    // Set up interval\n    const intervalId = setInterval(fetchUpdates, interval);\n\n    // Return unsubscribe function\n    return () => clearInterval(intervalId);\n  }\n}\nexport default new ProductService();","map":{"version":3,"names":["axios","API_BASE_URL","ProductService","constructor","client","create","baseURL","timeout","headers","interceptors","request","use","config","console","log","method","toUpperCase","url","error","Promise","reject","response","data","Error","status","statusText","message","getAllProducts","limit","sort","params","get","getProductById","id","getCategories","getProductsByCategory","category","addProduct","product","post","updateProduct","put","deleteProduct","delete","getAllUsers","getUserById","getAllCarts","getCartById","getUserCarts","userId","addCart","cart","updateCart","deleteCart","fetchProductsWithCache","cacheKey","maxAge","cached","localStorage","getItem","timestamp","JSON","parse","Date","now","setItem","stringify","warn","subscribeToProductUpdates","callback","interval","fetchUpdates","products","updatedProducts","map","price","Math","random","lastUpdated","toISOString","intervalId","setInterval","clearInterval"],"sources":["C:/Users/veszi/Desktop/Portofolio/vue-pwa-webshop/src/services/productService.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nconst API_BASE_URL = 'https://fakestoreapi.com'\r\n\r\nclass ProductService {\r\n  constructor() {\r\n    this.client = axios.create({\r\n      baseURL: API_BASE_URL,\r\n      timeout: 10000,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n\r\n    // Add request interceptor for logging\r\n    this.client.interceptors.request.use(\r\n      config => {\r\n        console.log(`API Request: ${config.method?.toUpperCase()} ${config.url}`)\r\n        return config\r\n      },\r\n      error => {\r\n        console.error('API Request Error:', error)\r\n        return Promise.reject(error)\r\n      }\r\n    )\r\n\r\n    // Add response interceptor for error handling\r\n    this.client.interceptors.response.use(\r\n      response => response.data,\r\n      error => {\r\n        console.error('API Response Error:', error)\r\n        if (error.response) {\r\n          throw new Error(`API Error: ${error.response.status} - ${error.response.statusText}`)\r\n        } else if (error.request) {\r\n          throw new Error('Network error: No response from server')\r\n        } else {\r\n          throw new Error('Request error: ' + error.message)\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  // Get all products\r\n  async getAllProducts(limit = null, sort = 'asc') {\r\n    const params = {}\r\n    if (limit) params.limit = limit\r\n    if (sort) params.sort = sort\r\n    \r\n    return this.client.get('/products', { params })\r\n  }\r\n\r\n  // Get single product\r\n  async getProductById(id) {\r\n    return this.client.get(`/products/${id}`)\r\n  }\r\n\r\n  // Get all categories\r\n  async getCategories() {\r\n    return this.client.get('/products/categories')\r\n  }\r\n\r\n  // Get products by category\r\n  async getProductsByCategory(category, limit = null, sort = 'asc') {\r\n    const params = {}\r\n    if (limit) params.limit = limit\r\n    if (sort) params.sort = sort\r\n    \r\n    return this.client.get(`/products/category/${category}`, { params })\r\n  }\r\n\r\n  // Add new product (fake - not actually saved)\r\n  async addProduct(product) {\r\n    return this.client.post('/products', product)\r\n  }\r\n\r\n  // Update product (fake - not actually saved)\r\n  async updateProduct(id, product) {\r\n    return this.client.put(`/products/${id}`, product)\r\n  }\r\n\r\n  // Delete product (fake - not actually deleted)\r\n  async deleteProduct(id) {\r\n    return this.client.delete(`/products/${id}`)\r\n  }\r\n\r\n  // Get all users (for admin purposes)\r\n  async getAllUsers() {\r\n    return this.client.get('/users')\r\n  }\r\n\r\n  // Get single user\r\n  async getUserById(id) {\r\n    return this.client.get(`/users/${id}`)\r\n  }\r\n\r\n  // Get all carts\r\n  async getAllCarts() {\r\n    return this.client.get('/carts')\r\n  }\r\n\r\n  // Get single cart\r\n  async getCartById(id) {\r\n    return this.client.get(`/carts/${id}`)\r\n  }\r\n\r\n  // Get user carts\r\n  async getUserCarts(userId) {\r\n    return this.client.get(`/carts/user/${userId}`)\r\n  }\r\n\r\n  // Add new cart\r\n  async addCart(cart) {\r\n    return this.client.post('/carts', cart)\r\n  }\r\n\r\n  // Update cart\r\n  async updateCart(id, cart) {\r\n    return this.client.put(`/carts/${id}`, cart)\r\n  }\r\n\r\n  // Delete cart\r\n  async deleteCart(id) {\r\n    return this.client.delete(`/carts/${id}`)\r\n  }\r\n\r\n  // Custom method for batch fetching with caching\r\n  async fetchProductsWithCache(cacheKey = 'products_cache', maxAge = 300000) { // 5 minutes\r\n    try {\r\n      const cached = localStorage.getItem(cacheKey)\r\n      if (cached) {\r\n        const { data, timestamp } = JSON.parse(cached)\r\n        if (Date.now() - timestamp < maxAge) {\r\n          console.log('Using cached products')\r\n          return data\r\n        }\r\n      }\r\n\r\n      const data = await this.getAllProducts()\r\n      localStorage.setItem(cacheKey, JSON.stringify({\r\n        data,\r\n        timestamp: Date.now()\r\n      }))\r\n      \r\n      return data\r\n    } catch (error) {\r\n      // If API fails, try to use cached data even if expired\r\n      const cached = localStorage.getItem(cacheKey)\r\n      if (cached) {\r\n        const { data } = JSON.parse(cached)\r\n        console.warn('Using expired cache due to API error')\r\n        return data\r\n      }\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // Mock real-time updates (simulate WebSocket behavior)\r\n  subscribeToProductUpdates(callback, interval = 60000) { // 1 minute\r\n    const fetchUpdates = async () => {\r\n      try {\r\n        const products = await this.getAllProducts()\r\n        \r\n        // Simulate random price changes\r\n        const updatedProducts = products.map(product => ({\r\n          ...product,\r\n          price: product.price * (0.95 + Math.random() * 0.1), // ±5% price variation\r\n          lastUpdated: new Date().toISOString()\r\n        }))\r\n        \r\n        callback(updatedProducts)\r\n      } catch (error) {\r\n        console.error('Error fetching product updates:', error)\r\n      }\r\n    }\r\n\r\n    // Initial fetch\r\n    fetchUpdates()\r\n    \r\n    // Set up interval\r\n    const intervalId = setInterval(fetchUpdates, interval)\r\n    \r\n    // Return unsubscribe function\r\n    return () => clearInterval(intervalId)\r\n  }\r\n}\r\n\r\nexport default new ProductService()\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}