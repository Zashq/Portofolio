{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, computed, onMounted, watch } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useProductsStore } from '@/store/products';\nimport ProductCard from '@/components/ProductCard.vue';\nexport default {\n  name: 'SearchView',\n  components: {\n    ProductCard\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const productsStore = useProductsStore();\n    const searchQuery = ref('');\n    const results = ref([]);\n    const loading = ref(false);\n    const sortBy = ref('relevance');\n    const currentPage = ref(1);\n    const itemsPerPage = 12;\n    const sortOptions = [{\n      title: 'Relevance',\n      value: 'relevance'\n    }, {\n      title: 'Price: Low to High',\n      value: 'price-asc'\n    }, {\n      title: 'Price: High to Low',\n      value: 'price-desc'\n    }, {\n      title: 'Name: A to Z',\n      value: 'name-asc'\n    }];\n    const sortedResults = computed(() => {\n      let sorted = [...results.value];\n      switch (sortBy.value) {\n        case 'price-asc':\n          sorted.sort((a, b) => a.price - b.price);\n          break;\n        case 'price-desc':\n          sorted.sort((a, b) => b.price - a.price);\n          break;\n        case 'name-asc':\n          sorted.sort((a, b) => a.title.localeCompare(b.title));\n          break;\n      }\n      return sorted;\n    });\n    const totalPages = computed(() => Math.ceil(sortedResults.value.length / itemsPerPage));\n    const paginatedResults = computed(() => {\n      const start = (currentPage.value - 1) * itemsPerPage;\n      const end = start + itemsPerPage;\n      return sortedResults.value.slice(start, end);\n    });\n    const performSearch = async () => {\n      if (!searchQuery.value) return;\n      loading.value = true;\n      try {\n        await productsStore.loadProducts();\n        results.value = productsStore.searchProducts(searchQuery.value);\n        currentPage.value = 1;\n\n        // Update URL\n        router.push({\n          query: {\n            q: searchQuery.value\n          }\n        });\n      } catch (error) {\n        console.error('Search error:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n    watch(() => route.query.q, newQuery => {\n      if (newQuery) {\n        searchQuery.value = newQuery;\n        performSearch();\n      }\n    });\n    onMounted(() => {\n      const query = route.query.q;\n      if (query) {\n        searchQuery.value = query;\n        performSearch();\n      }\n    });\n    return {\n      searchQuery,\n      results,\n      loading,\n      sortBy,\n      sortOptions,\n      currentPage,\n      totalPages,\n      paginatedResults,\n      performSearch\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","useRoute","useRouter","useProductsStore","ProductCard","name","components","setup","route","router","productsStore","searchQuery","results","loading","sortBy","currentPage","itemsPerPage","sortOptions","title","value","sortedResults","sorted","sort","a","b","price","localeCompare","totalPages","Math","ceil","length","paginatedResults","start","end","slice","performSearch","loadProducts","searchProducts","push","query","q","error","console","newQuery"],"sources":["C:\\Users\\veszi\\Desktop\\Portofolio\\vue-pwa-webshop\\src\\views\\Search.vue"],"sourcesContent":["<template>\n  <v-container>\n    <!-- Search Header -->\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\">\n        <h1 class=\"text-h3 font-weight-bold mb-2\">Search Results</h1>\n        <p class=\"text-subtitle-1 text-grey\">\n          {{ results.length }} results for \"{{ searchQuery }}\"\n        </p>\n      </v-col>\n    </v-row>\n\n    <!-- Search Bar -->\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\" md=\"8\">\n        <v-text-field\n          v-model=\"searchQuery\"\n          label=\"Search products...\"\n          prepend-inner-icon=\"mdi-magnify\"\n          outlined\n          dense\n          clearable\n          @keyup.enter=\"performSearch\"\n        ></v-text-field>\n      </v-col>\n      <v-col cols=\"12\" md=\"4\">\n        <v-select\n          v-model=\"sortBy\"\n          :items=\"sortOptions\"\n          label=\"Sort by\"\n          outlined\n          dense\n        ></v-select>\n      </v-col>\n    </v-row>\n\n    <!-- Loading State -->\n    <v-row v-if=\"loading\" class=\"my-12\">\n      <v-col cols=\"12\" class=\"text-center\">\n        <v-progress-circular\n          indeterminate\n          color=\"primary\"\n          size=\"64\"\n        ></v-progress-circular>\n        <p class=\"mt-4\">Searching...</p>\n      </v-col>\n    </v-row>\n\n    <!-- No Results -->\n    <v-row v-else-if=\"results.length === 0\">\n      <v-col cols=\"12\" class=\"text-center py-12\">\n        <v-icon size=\"120\" color=\"grey-lighten-2\">mdi-magnify</v-icon>\n        <h2 class=\"text-h4 mt-4 mb-2\">No results found</h2>\n        <p class=\"text-grey mb-6\">Try different keywords or browse our categories</p>\n        <v-btn color=\"primary\" to=\"/categories\">\n          Browse Categories\n        </v-btn>\n      </v-col>\n    </v-row>\n\n    <!-- Search Results -->\n    <v-row v-else>\n      <v-col\n        v-for=\"product in paginatedResults\"\n        :key=\"product.id\"\n        cols=\"12\"\n        sm=\"6\"\n        md=\"4\"\n        lg=\"3\"\n      >\n        <ProductCard :product=\"product\" />\n      </v-col>\n    </v-row>\n\n    <!-- Pagination -->\n    <v-row v-if=\"totalPages > 1\" class=\"mt-4\">\n      <v-col cols=\"12\" class=\"d-flex justify-center\">\n        <v-pagination\n          v-model=\"currentPage\"\n          :length=\"totalPages\"\n          :total-visible=\"7\"\n        ></v-pagination>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useProductsStore } from '@/store/products'\nimport ProductCard from '@/components/ProductCard.vue'\n\nexport default {\n  name: 'SearchView',\n  components: {\n    ProductCard\n  },\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const productsStore = useProductsStore()\n    \n    const searchQuery = ref('')\n    const results = ref([])\n    const loading = ref(false)\n    const sortBy = ref('relevance')\n    const currentPage = ref(1)\n    const itemsPerPage = 12\n    \n    const sortOptions = [\n      { title: 'Relevance', value: 'relevance' },\n      { title: 'Price: Low to High', value: 'price-asc' },\n      { title: 'Price: High to Low', value: 'price-desc' },\n      { title: 'Name: A to Z', value: 'name-asc' }\n    ]\n    \n    const sortedResults = computed(() => {\n      let sorted = [...results.value]\n      \n      switch (sortBy.value) {\n        case 'price-asc':\n          sorted.sort((a, b) => a.price - b.price)\n          break\n        case 'price-desc':\n          sorted.sort((a, b) => b.price - a.price)\n          break\n        case 'name-asc':\n          sorted.sort((a, b) => a.title.localeCompare(b.title))\n          break\n      }\n      \n      return sorted\n    })\n    \n    const totalPages = computed(() => \n      Math.ceil(sortedResults.value.length / itemsPerPage)\n    )\n    \n    const paginatedResults = computed(() => {\n      const start = (currentPage.value - 1) * itemsPerPage\n      const end = start + itemsPerPage\n      return sortedResults.value.slice(start, end)\n    })\n    \n    const performSearch = async () => {\n      if (!searchQuery.value) return\n      \n      loading.value = true\n      try {\n        await productsStore.loadProducts()\n        results.value = productsStore.searchProducts(searchQuery.value)\n        currentPage.value = 1\n        \n        // Update URL\n        router.push({ query: { q: searchQuery.value } })\n      } catch (error) {\n        console.error('Search error:', error)\n      } finally {\n        loading.value = false\n      }\n    }\n    \n    watch(() => route.query.q, (newQuery) => {\n      if (newQuery) {\n        searchQuery.value = newQuery\n        performSearch()\n      }\n    })\n    \n    onMounted(() => {\n      const query = route.query.q\n      if (query) {\n        searchQuery.value = query\n        performSearch()\n      }\n    })\n    \n    return {\n      searchQuery,\n      results,\n      loading,\n      sortBy,\n      sortOptions,\n      currentPage,\n      totalPages,\n      paginatedResults,\n      performSearch\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}