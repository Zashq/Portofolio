{"ast":null,"code":"import { computed } from 'vue';\nimport { useCartStore } from '@/store/cart';\nimport { useToast } from 'vue-toastification';\nexport default {\n  name: 'ProductCard',\n  props: {\n    product: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const cartStore = useCartStore();\n    const toast = useToast();\n    const truncatedTitle = computed(() => {\n      const maxLength = 50;\n      if (props.product.title.length > maxLength) {\n        return props.product.title.substring(0, maxLength) + '...';\n      }\n      return props.product.title;\n    });\n\n    // Simulate sale logic\n    const isOnSale = computed(() => {\n      // Random sale for demo (in production, this would come from backend)\n      return props.product.id % 3 === 0;\n    });\n    const salePercentage = computed(() => {\n      if (!isOnSale.value) return 0;\n      return Math.floor(Math.random() * 30) + 10; // 10-40% off\n    });\n    const originalPrice = computed(() => {\n      return props.product.price.toFixed(2);\n    });\n    const currentPrice = computed(() => {\n      if (isOnSale.value) {\n        const discounted = props.product.price * (1 - salePercentage.value / 100);\n        return discounted.toFixed(2);\n      }\n      return originalPrice.value;\n    });\n    const addToCart = async () => {\n      const result = await cartStore.addItem({\n        ...props.product,\n        price: parseFloat(currentPrice.value)\n      });\n      if (result.success) {\n        toast.success(`${props.product.title} added to cart`);\n      } else {\n        toast.error('Failed to add item to cart');\n      }\n    };\n    return {\n      truncatedTitle,\n      isOnSale,\n      salePercentage,\n      originalPrice,\n      currentPrice,\n      addToCart\n    };\n  }\n};","map":{"version":3,"names":["computed","useCartStore","useToast","name","props","product","type","Object","required","setup","cartStore","toast","truncatedTitle","maxLength","title","length","substring","isOnSale","id","salePercentage","value","Math","floor","random","originalPrice","price","toFixed","currentPrice","discounted","addToCart","result","addItem","parseFloat","success","error"],"sources":["C:\\Users\\veszi\\Desktop\\Portofolio\\vue-pwa-webshop\\src\\components\\ProductCard.vue"],"sourcesContent":["<template>\r\n  <v-card\r\n    class=\"product-card h-100\"\r\n    @click=\"$router.push(`/product/${product.id}`)\"\r\n  >\r\n    <v-img\r\n      :src=\"product.image\"\r\n      :alt=\"product.title\"\r\n      height=\"200\"\r\n      cover\r\n      class=\"product-image\"\r\n    >\r\n      <template v-slot:placeholder>\r\n        <v-row\r\n          class=\"fill-height ma-0\"\r\n          align=\"center\"\r\n          justify=\"center\"\r\n        >\r\n          <v-progress-circular\r\n            indeterminate\r\n            color=\"grey-lighten-5\"\r\n          ></v-progress-circular>\r\n        </v-row>\r\n      </template>\r\n      \r\n      <!-- Sale Badge -->\r\n      <v-chip\r\n        v-if=\"isOnSale\"\r\n        color=\"error\"\r\n        class=\"ma-2 position-absolute\"\r\n        style=\"top: 0; right: 0;\"\r\n      >\r\n        -{{ salePercentage }}%\r\n      </v-chip>\r\n    </v-img>\r\n\r\n    <v-card-title class=\"text-subtitle-1\">\r\n      {{ truncatedTitle }}\r\n    </v-card-title>\r\n\r\n    <v-card-subtitle>\r\n      <v-chip size=\"x-small\" color=\"primary\" variant=\"outlined\">\r\n        {{ product.category }}\r\n      </v-chip>\r\n    </v-card-subtitle>\r\n\r\n    <v-card-text>\r\n      <div class=\"d-flex align-center mb-2\">\r\n        <v-rating\r\n          :model-value=\"product.rating?.rate || 4\"\r\n          color=\"amber\"\r\n          density=\"compact\"\r\n          half-increments\r\n          readonly\r\n          size=\"small\"\r\n        ></v-rating>\r\n        <span class=\"text-caption ml-2\">\r\n          ({{ product.rating?.count || 0 }})\r\n        </span>\r\n      </div>\r\n      \r\n      <div class=\"price-section\">\r\n        <span v-if=\"isOnSale\" class=\"text-decoration-line-through text-grey mr-2\">\r\n          ${{ originalPrice }}\r\n        </span>\r\n        <span class=\"text-h6 font-weight-bold\">\r\n          ${{ currentPrice }}\r\n        </span>\r\n      </div>\r\n    </v-card-text>\r\n\r\n    <v-card-actions>\r\n      <v-btn\r\n        color=\"primary\"\r\n        variant=\"outlined\"\r\n        block\r\n        @click.stop=\"addToCart\"\r\n      >\r\n        <v-icon left>mdi-cart-plus</v-icon>\r\n        Add to Cart\r\n      </v-btn>\r\n    </v-card-actions>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue'\r\nimport { useCartStore } from '@/store/cart'\r\nimport { useToast } from 'vue-toastification'\r\n\r\nexport default {\r\n  name: 'ProductCard',\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  setup(props) {\r\n    const cartStore = useCartStore()\r\n    const toast = useToast()\r\n    \r\n    const truncatedTitle = computed(() => {\r\n      const maxLength = 50\r\n      if (props.product.title.length > maxLength) {\r\n        return props.product.title.substring(0, maxLength) + '...'\r\n      }\r\n      return props.product.title\r\n    })\r\n    \r\n    // Simulate sale logic\r\n    const isOnSale = computed(() => {\r\n      // Random sale for demo (in production, this would come from backend)\r\n      return props.product.id % 3 === 0\r\n    })\r\n    \r\n    const salePercentage = computed(() => {\r\n      if (!isOnSale.value) return 0\r\n      return Math.floor(Math.random() * 30) + 10 // 10-40% off\r\n    })\r\n    \r\n    const originalPrice = computed(() => {\r\n      return props.product.price.toFixed(2)\r\n    })\r\n    \r\n    const currentPrice = computed(() => {\r\n      if (isOnSale.value) {\r\n        const discounted = props.product.price * (1 - salePercentage.value / 100)\r\n        return discounted.toFixed(2)\r\n      }\r\n      return originalPrice.value\r\n    })\r\n    \r\n    const addToCart = async () => {\r\n      const result = await cartStore.addItem({\r\n        ...props.product,\r\n        price: parseFloat(currentPrice.value)\r\n      })\r\n      \r\n      if (result.success) {\r\n        toast.success(`${props.product.title} added to cart`)\r\n      } else {\r\n        toast.error('Failed to add item to cart')\r\n      }\r\n    }\r\n    \r\n    return {\r\n      truncatedTitle,\r\n      isOnSale,\r\n      salePercentage,\r\n      originalPrice,\r\n      currentPrice,\r\n      addToCart\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.product-card {\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.product-card:hover {\r\n  transform: translateY(-4px);\r\n  box-shadow: 0 4px 20px rgba(0,0,0,0.1);\r\n}\r\n\r\n.product-image {\r\n  object-fit: contain;\r\n  padding: 10px;\r\n  background: white;\r\n}\r\n\r\n.price-section {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.position-absolute {\r\n  position: absolute !important;\r\n}\r\n</style>\r\n"],"mappings":"AAsFA,SAASA,QAAO,QAAS,KAAI;AAC7B,SAASC,YAAW,QAAS,cAAa;AAC1C,SAASC,QAAO,QAAS,oBAAmB;AAE5C,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,KAAKA,CAACL,KAAK,EAAE;IACX,MAAMM,SAAQ,GAAIT,YAAY,CAAC;IAC/B,MAAMU,KAAI,GAAIT,QAAQ,CAAC;IAEvB,MAAMU,cAAa,GAAIZ,QAAQ,CAAC,MAAM;MACpC,MAAMa,SAAQ,GAAI,EAAC;MACnB,IAAIT,KAAK,CAACC,OAAO,CAACS,KAAK,CAACC,MAAK,GAAIF,SAAS,EAAE;QAC1C,OAAOT,KAAK,CAACC,OAAO,CAACS,KAAK,CAACE,SAAS,CAAC,CAAC,EAAEH,SAAS,IAAI,KAAI;MAC3D;MACA,OAAOT,KAAK,CAACC,OAAO,CAACS,KAAI;IAC3B,CAAC;;IAED;IACA,MAAMG,QAAO,GAAIjB,QAAQ,CAAC,MAAM;MAC9B;MACA,OAAOI,KAAK,CAACC,OAAO,CAACa,EAAC,GAAI,MAAM;IAClC,CAAC;IAED,MAAMC,cAAa,GAAInB,QAAQ,CAAC,MAAM;MACpC,IAAI,CAACiB,QAAQ,CAACG,KAAK,EAAE,OAAO;MAC5B,OAAOC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,IAAI,EAAC,EAAE;IAC7C,CAAC;IAED,MAAMC,aAAY,GAAIxB,QAAQ,CAAC,MAAM;MACnC,OAAOI,KAAK,CAACC,OAAO,CAACoB,KAAK,CAACC,OAAO,CAAC,CAAC;IACtC,CAAC;IAED,MAAMC,YAAW,GAAI3B,QAAQ,CAAC,MAAM;MAClC,IAAIiB,QAAQ,CAACG,KAAK,EAAE;QAClB,MAAMQ,UAAS,GAAIxB,KAAK,CAACC,OAAO,CAACoB,KAAI,IAAK,IAAIN,cAAc,CAACC,KAAI,GAAI,GAAG;QACxE,OAAOQ,UAAU,CAACF,OAAO,CAAC,CAAC;MAC7B;MACA,OAAOF,aAAa,CAACJ,KAAI;IAC3B,CAAC;IAED,MAAMS,SAAQ,GAAI,MAAAA,CAAA,KAAY;MAC5B,MAAMC,MAAK,GAAI,MAAMpB,SAAS,CAACqB,OAAO,CAAC;QACrC,GAAG3B,KAAK,CAACC,OAAO;QAChBoB,KAAK,EAAEO,UAAU,CAACL,YAAY,CAACP,KAAK;MACtC,CAAC;MAED,IAAIU,MAAM,CAACG,OAAO,EAAE;QAClBtB,KAAK,CAACsB,OAAO,CAAC,GAAG7B,KAAK,CAACC,OAAO,CAACS,KAAK,gBAAgB;MACtD,OAAO;QACLH,KAAK,CAACuB,KAAK,CAAC,4BAA4B;MAC1C;IACF;IAEA,OAAO;MACLtB,cAAc;MACdK,QAAQ;MACRE,cAAc;MACdK,aAAa;MACbG,YAAY;MACZE;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}