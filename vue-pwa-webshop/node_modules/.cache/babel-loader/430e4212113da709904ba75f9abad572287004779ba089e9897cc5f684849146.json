{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, computed, onMounted, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useProductsStore } from '@/store/products';\nimport ProductCard from '@/components/ProductCard.vue';\nexport default {\n  name: 'CategoryProductsView',\n  components: {\n    ProductCard\n  },\n  setup() {\n    const route = useRoute();\n    const productsStore = useProductsStore();\n    const products = ref([]);\n    const loading = ref(true);\n    const sortBy = ref('default');\n    const minPrice = ref('');\n    const maxPrice = ref('');\n    const currentPage = ref(1);\n    const itemsPerPage = 12;\n    const categoryName = computed(() => route.params.category);\n    const sortOptions = [{\n      title: 'Default',\n      value: 'default'\n    }, {\n      title: 'Price: Low to High',\n      value: 'price-asc'\n    }, {\n      title: 'Price: High to Low',\n      value: 'price-desc'\n    }, {\n      title: 'Name: A to Z',\n      value: 'name-asc'\n    }, {\n      title: 'Rating: High to Low',\n      value: 'rating-desc'\n    }];\n    const filteredProducts = computed(() => {\n      let filtered = [...products.value];\n      if (minPrice.value !== '') {\n        filtered = filtered.filter(p => p.price >= parseFloat(minPrice.value));\n      }\n      if (maxPrice.value !== '') {\n        filtered = filtered.filter(p => p.price <= parseFloat(maxPrice.value));\n      }\n      switch (sortBy.value) {\n        case 'price-asc':\n          filtered.sort((a, b) => a.price - b.price);\n          break;\n        case 'price-desc':\n          filtered.sort((a, b) => b.price - a.price);\n          break;\n        case 'name-asc':\n          filtered.sort((a, b) => a.title.localeCompare(b.title));\n          break;\n        case 'rating-desc':\n          filtered.sort((a, b) => (b.rating?.rate || 0) - (a.rating?.rate || 0));\n          break;\n      }\n      return filtered;\n    });\n    const totalPages = computed(() => Math.ceil(filteredProducts.value.length / itemsPerPage));\n    const paginatedProducts = computed(() => {\n      const start = (currentPage.value - 1) * itemsPerPage;\n      const end = start + itemsPerPage;\n      return filteredProducts.value.slice(start, end);\n    });\n    const loadProducts = async () => {\n      loading.value = true;\n      try {\n        products.value = await productsStore.getProductsByCategory(categoryName.value);\n      } catch (error) {\n        console.error('Error loading category products:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const clearFilters = () => {\n      sortBy.value = 'default';\n      minPrice.value = '';\n      maxPrice.value = '';\n      currentPage.value = 1;\n    };\n    watch(() => route.params.category, () => {\n      loadProducts();\n      clearFilters();\n    });\n    watch([sortBy, minPrice, maxPrice], () => {\n      currentPage.value = 1;\n    });\n    onMounted(() => {\n      loadProducts();\n    });\n    return {\n      categoryName,\n      products,\n      loading,\n      sortBy,\n      sortOptions,\n      minPrice,\n      maxPrice,\n      currentPage,\n      filteredProducts,\n      paginatedProducts,\n      totalPages,\n      clearFilters\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","useRoute","useProductsStore","ProductCard","name","components","setup","route","productsStore","products","loading","sortBy","minPrice","maxPrice","currentPage","itemsPerPage","categoryName","params","category","sortOptions","title","value","filteredProducts","filtered","filter","p","price","parseFloat","sort","a","b","localeCompare","rating","rate","totalPages","Math","ceil","length","paginatedProducts","start","end","slice","loadProducts","getProductsByCategory","error","console","clearFilters"],"sources":["C:\\Users\\veszi\\Desktop\\Portofolio\\vue-pwa-webshop\\src\\views\\CategoryProducts.vue"],"sourcesContent":["<template>\n  <v-container>\n    <!-- Category Header -->\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\">\n        <v-btn variant=\"text\" @click=\"$router.push('/categories')\">\n          <v-icon left>mdi-arrow-left</v-icon>\n          All Categories\n        </v-btn>\n        <h1 class=\"text-h3 font-weight-bold mt-2 text-capitalize\">\n          {{ categoryName }}\n        </h1>\n        <p class=\"text-subtitle-1 text-grey\">\n          {{ products.length }} products available\n        </p>\n      </v-col>\n    </v-row>\n\n    <!-- Filters -->\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\" md=\"3\">\n        <v-select\n          v-model=\"sortBy\"\n          :items=\"sortOptions\"\n          label=\"Sort By\"\n          outlined\n          dense\n        ></v-select>\n      </v-col>\n      <v-col cols=\"12\" md=\"3\">\n        <v-text-field\n          v-model=\"minPrice\"\n          label=\"Min Price\"\n          type=\"number\"\n          outlined\n          dense\n          prefix=\"$\"\n        ></v-text-field>\n      </v-col>\n      <v-col cols=\"12\" md=\"3\">\n        <v-text-field\n          v-model=\"maxPrice\"\n          label=\"Max Price\"\n          type=\"number\"\n          outlined\n          dense\n          prefix=\"$\"\n        ></v-text-field>\n      </v-col>\n      <v-col cols=\"12\" md=\"3\">\n        <v-btn\n          color=\"secondary\"\n          variant=\"outlined\"\n          block\n          @click=\"clearFilters\"\n        >\n          Clear Filters\n        </v-btn>\n      </v-col>\n    </v-row>\n\n    <!-- Loading State -->\n    <v-row v-if=\"loading\" class=\"my-12\">\n      <v-col cols=\"12\" class=\"text-center\">\n        <v-progress-circular\n          indeterminate\n          color=\"primary\"\n          size=\"64\"\n        ></v-progress-circular>\n        <p class=\"mt-4\">Loading products...</p>\n      </v-col>\n    </v-row>\n\n    <!-- No Products -->\n    <v-row v-else-if=\"filteredProducts.length === 0\">\n      <v-col cols=\"12\" class=\"text-center py-12\">\n        <v-icon size=\"120\" color=\"grey-lighten-2\">mdi-package-variant-closed</v-icon>\n        <h2 class=\"text-h4 mt-4 mb-2\">No products found</h2>\n        <p class=\"text-grey mb-6\">Try adjusting your filters</p>\n        <v-btn color=\"primary\" @click=\"clearFilters\">\n          Clear Filters\n        </v-btn>\n      </v-col>\n    </v-row>\n\n    <!-- Products Grid -->\n    <v-row v-else>\n      <v-col\n        v-for=\"product in paginatedProducts\"\n        :key=\"product.id\"\n        cols=\"12\"\n        sm=\"6\"\n        md=\"4\"\n        lg=\"3\"\n      >\n        <ProductCard :product=\"product\" />\n      </v-col>\n    </v-row>\n\n    <!-- Pagination -->\n    <v-row v-if=\"totalPages > 1\" class=\"mt-4\">\n      <v-col cols=\"12\" class=\"d-flex justify-center\">\n        <v-pagination\n          v-model=\"currentPage\"\n          :length=\"totalPages\"\n          :total-visible=\"7\"\n        ></v-pagination>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useProductsStore } from '@/store/products'\nimport ProductCard from '@/components/ProductCard.vue'\n\nexport default {\n  name: 'CategoryProductsView',\n  components: {\n    ProductCard\n  },\n  setup() {\n    const route = useRoute()\n    const productsStore = useProductsStore()\n    \n    const products = ref([])\n    const loading = ref(true)\n    const sortBy = ref('default')\n    const minPrice = ref('')\n    const maxPrice = ref('')\n    const currentPage = ref(1)\n    const itemsPerPage = 12\n    \n    const categoryName = computed(() => route.params.category)\n    \n    const sortOptions = [\n      { title: 'Default', value: 'default' },\n      { title: 'Price: Low to High', value: 'price-asc' },\n      { title: 'Price: High to Low', value: 'price-desc' },\n      { title: 'Name: A to Z', value: 'name-asc' },\n      { title: 'Rating: High to Low', value: 'rating-desc' }\n    ]\n    \n    const filteredProducts = computed(() => {\n      let filtered = [...products.value]\n      \n      \n      if (minPrice.value !== '') {\n        filtered = filtered.filter(p => p.price >= parseFloat(minPrice.value))\n      }\n      if (maxPrice.value !== '') {\n        filtered = filtered.filter(p => p.price <= parseFloat(maxPrice.value))\n      }\n      \n      \n      switch (sortBy.value) {\n        case 'price-asc':\n          filtered.sort((a, b) => a.price - b.price)\n          break\n        case 'price-desc':\n          filtered.sort((a, b) => b.price - a.price)\n          break\n        case 'name-asc':\n          filtered.sort((a, b) => a.title.localeCompare(b.title))\n          break\n        case 'rating-desc':\n          filtered.sort((a, b) => (b.rating?.rate || 0) - (a.rating?.rate || 0))\n          break\n      }\n      \n      return filtered\n    })\n    \n    const totalPages = computed(() => \n      Math.ceil(filteredProducts.value.length / itemsPerPage)\n    )\n    \n    const paginatedProducts = computed(() => {\n      const start = (currentPage.value - 1) * itemsPerPage\n      const end = start + itemsPerPage\n      return filteredProducts.value.slice(start, end)\n    })\n    \n    const loadProducts = async () => {\n      loading.value = true\n      try {\n        products.value = await productsStore.getProductsByCategory(categoryName.value)\n      } catch (error) {\n        console.error('Error loading category products:', error)\n      } finally {\n        loading.value = false\n      }\n    }\n    \n    const clearFilters = () => {\n      sortBy.value = 'default'\n      minPrice.value = ''\n      maxPrice.value = ''\n      currentPage.value = 1\n    }\n    \n    watch(() => route.params.category, () => {\n      loadProducts()\n      clearFilters()\n    })\n    \n    watch([sortBy, minPrice, maxPrice], () => {\n      currentPage.value = 1\n    })\n    \n    onMounted(() => {\n      loadProducts()\n    })\n    \n    return {\n      categoryName,\n      products,\n      loading,\n      sortBy,\n      sortOptions,\n      minPrice,\n      maxPrice,\n      currentPage,\n      filteredProducts,\n      paginatedProducts,\n      totalPages,\n      clearFilters\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}